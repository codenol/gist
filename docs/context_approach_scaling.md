# Масштабирование контекстного подхода: проблемы и решения

## Проблема масштабирования

При контекстном подходе компонентные токены ссылаются напрямую на базовый слой (`base.*`), минуя семантический слой. Это создает проблему масштабирования при большом количестве компонентов.

## Практический пример: изменение primary цвета

### Сценарий
Нужно изменить primary цвет с `base.color.blue.500` на `base.color.purple.500` во всех компонентах.

### Без семантического слоя (контекстный подход)

Если у вас 200 компонентов, которые используют `base.color.blue.500` для primary:

```
button_context.json:     base.color.blue.500 → base.color.purple.500
link_context.json:       base.color.blue.500 → base.color.purple.500
icon-button_context.json: base.color.blue.500 → base.color.purple.500
card_context.json:        base.color.blue.500 → base.color.purple.500
... (еще 196 файлов)
```

**Время выполнения:**
- Вручную: 2-5 минут на файл × 200 = **6-16 часов**
- С поиском и заменой: **1-2 часа** (но высокий риск ошибок)
- Со скриптом: **30-60 минут** (но нужно писать и тестировать скрипт)

**Риски:**
- Можно пропустить файлы
- Можно сделать опечатки
- Можно случайно изменить не те значения
- Нужно тестировать каждый компонент

### С семантическим слоем (другие подходы)

Меняем в одном месте:

```json
semantic_functional.color.action.primary = "{base.color.purple.500}"
```

**Время выполнения:** **30 секунд**

**Риски:** Минимальные

## Реальные цифры для разных задач

### 1. Изменение одного значения (primary цвет)

| Подход | Количество файлов | Время (вручную) | Время (скрипт) |
|--------|------------------|-----------------|----------------|
| Контекстный (без семантики) | 200 файлов | 6-16 часов | 1-2 часа |
| Функциональный/Роли/Иерархия | 1 файл | 30 секунд | 30 секунд |

### 2. Ребрендинг (множество изменений)

| Подход | Время |
|--------|-------|
| Контекстный (без семантики) | **Дни работы** |
| С семантическим слоем | **Часы работы** |

### 3. White Label решение

| Подход | Сложность |
|--------|-----------|
| Контекстный (без семантики) | **Практически нереализуемо** без автоматизации |
| С семантическим слоем | **Просто**: меняем маппинг семантических токенов |

## Когда это критично

### 1. White Label решения
Нужно создавать разные версии для разных брендов. Без семантического слоя это означает:
- Дублирование всех 200 файлов компонентных токенов
- Поддержка нескольких версий
- Высокий риск рассинхронизации

### 2. Ребрендинг
Глобальное изменение цветовой палитры. Без семантического слоя:
- Нужно менять в сотнях файлов
- Высокий риск ошибок
- Долгий процесс тестирования

### 3. Тематизация
Светлая/темная тема. Без семантического слоя:
- Нужно создавать отдельные наборы токенов для каждой темы
- Дублирование структуры
- Сложность синхронизации

### 4. A/B тестирование
Быстрая смена цветов для тестирования. Без семантического слоя:
- Невозможно быстро переключаться
- Нужно менять множество файлов

## Компромиссы и рекомендации

### Контекстный подход хорош для:
- ✅ Быстрого прототипирования
- ✅ Небольших проектов (10-20 компонентов)
- ✅ Когда компоненты действительно уникальны и не переиспользуют значения
- ✅ Когда изменения редки и локализованы

### Семантический слой нужен для:
- ✅ Крупных проектов (50+ компонентов)
- ✅ White Label решений
- ✅ Когда нужна единая точка изменений
- ✅ Когда компоненты переиспользуют значения
- ✅ Когда изменения часты и глобальны

## Гибридный подход

Можно использовать комбинацию:
- **Семантический слой** для переиспользуемых значений (цвета, spacing, typography)
- **Контекстный подход** для уникальных компонентных особенностей

Пример:
```json
// Семантический слой
semantic_functional.color.action.primary = "{base.color.blue.500}"

// Компонентные токены
button.primary.background.default = "{semantic_functional.color.action.primary}"
button.unique_feature.special_color = "{base.color.purple.500}" // уникальное для кнопки
```

## Вывод

Для **200 компонентов** без семантического слоя:
- Изменение одного значения: **4-8 часов** (вручную) или **1-2 часа** (скрипт)
- Ребрендинг: **Дни работы**
- White Label: **Практически нереализуемо** без автоматизации

**Рекомендация:** Для проектов с большим количеством компонентов (50+) семантический слой критически важен. Контекстный подход без семантики подходит только для небольших проектов или когда компоненты действительно уникальны и не переиспользуют значения.

## См. также

- [Документация по контекстному подходу для кнопки](../component_tokens/button/context.md)
- [Документация по контекстному подходу для инпута](../component_tokens/input/context.md)
- [Документация по контекстному подходу для таблицы](../component_tokens/table/context.md)
- [Документация по контекстному подходу для бейджа](../component_tokens/badge/context.md)

